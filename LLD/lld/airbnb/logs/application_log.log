2024-05-27 18:26:35,562 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:26:53,518 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /
2024-05-27 18:27:10,980 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /admin/listing/listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
MySQLdb.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/options.py", line 716, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/cache.py", line 80, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/sites.py", line 240, in inner
    return view(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/options.py", line 2124, in changelist_view
    "selection_note": _("0 of %(cnt)s selected") % {"cnt": len(cl.result_list)},
                                                           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1562, in execute_sql
    cursor.execute(sql, params)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
django.db.utils.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")
2024-05-27 18:27:15,753 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /admin/payment/payment/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
MySQLdb.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/options.py", line 716, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/cache.py", line 80, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/sites.py", line 240, in inner
    return view(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/options.py", line 2124, in changelist_view
    "selection_note": _("0 of %(cnt)s selected") % {"cnt": len(cl.result_list)},
                                                           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1562, in execute_sql
    cursor.execute(sql, params)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
django.db.utils.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")
2024-05-27 18:27:24,184 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /admin/payment/payment/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
MySQLdb.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/options.py", line 716, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/cache.py", line 80, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/sites.py", line 240, in inner
    return view(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/options.py", line 2124, in changelist_view
    "selection_note": _("0 of %(cnt)s selected") % {"cnt": len(cl.result_list)},
                                                           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1562, in execute_sql
    cursor.execute(sql, params)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
django.db.utils.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")
2024-05-27 18:31:06,102 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Unauthorized: /listing/
2024-05-27 18:31:10,628 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {}
2024-05-27 18:31:10,638 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 57, in get
    request: Dict[str, Any] = generate_request_payload_from_query_params(query_params=request.query_params)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 49, in generate_request_payload_from_query_params
    'city': int(query_params.get('city')),
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-05-27 18:31:37,033 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {}
2024-05-27 18:31:37,053 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/2/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
MySQLdb.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 37, in get
    listing: Optional[Listing] = Listing.objects.get(id=listing_id)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 645, in get
    num = len(clone)
          ^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1562, in execute_sql
    cursor.execute(sql, params)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
django.db.utils.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")
2024-05-27 18:32:43,382 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {}
2024-05-27 18:32:43,394 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 57, in get
    request: Dict[str, Any] = generate_request_payload_from_query_params(query_params=request.query_params)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 49, in generate_request_payload_from_query_params
    'city': int(query_params.get('city')),
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-05-27 18:33:22,232 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {}
2024-05-27 18:33:22,253 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/2/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
MySQLdb.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 37, in get
    listing: Optional[Listing] = Listing.objects.get(id=listing_id)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 645, in get
    num = len(clone)
          ^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1562, in execute_sql
    cursor.execute(sql, params)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
django.db.utils.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")
2024-05-27 18:33:26,559 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {}
2024-05-27 18:33:26,575 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/2/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
MySQLdb.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 37, in get
    listing: Optional[Listing] = Listing.objects.get(id=listing_id)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 645, in get
    num = len(clone)
          ^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1562, in execute_sql
    cursor.execute(sql, params)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
django.db.utils.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")
2024-05-27 18:34:59,257 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:35:03,427 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {}
2024-05-27 18:35:03,451 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/2/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
MySQLdb.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 37, in get
    listing: Optional[Listing] = Listing.objects.get(id=listing_id)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 645, in get
    num = len(clone)
          ^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1562, in execute_sql
    cursor.execute(sql, params)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
django.db.utils.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")
2024-05-27 18:36:55,926 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py changed, reloading.
2024-05-27 18:36:56,250 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:36:57,908 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 18:36:57,933 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/2/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
MySQLdb.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 37, in get
    listing: Optional[Listing] = Listing.objects.get(id=listing_id)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 645, in get
    num = len(clone)
          ^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1562, in execute_sql
    cursor.execute(sql, params)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
django.db.utils.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")
2024-05-27 18:38:27,155 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py changed, reloading.
2024-05-27 18:38:27,468 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:38:29,393 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /admin/listing/listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
MySQLdb.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/options.py", line 716, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/cache.py", line 80, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/sites.py", line 240, in inner
    return view(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/contrib/admin/options.py", line 2124, in changelist_view
    "selection_note": _("0 of %(cnt)s selected") % {"cnt": len(cl.result_list)},
                                                           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1562, in execute_sql
    cursor.execute(sql, params)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
django.db.utils.OperationalError: (1054, "Unknown column 'listing_listing.is_available_for_booking' in 'field list'")
2024-05-27 18:39:59,251 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:40:22,210 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:40:24,816 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:40:26,186 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:42:00,355 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 18:42:00,365 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /listing/2/
2024-05-27 18:42:00,417 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:42:06,595 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/2/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ListingApi.post() got an unexpected keyword argument 'listing_id'
2024-05-27 18:42:15,927 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 18:42:15,936 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 58, in get
    request: Dict[str, Any] = generate_request_payload_from_query_params(query_params=request.query_params)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 50, in generate_request_payload_from_query_params
    'city': int(query_params.get('city')),
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-05-27 18:42:58,607 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 18:42:58,612 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /listing/2/
2024-05-27 18:42:58,646 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:43:24,496 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:43:31,890 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 1
2024-05-27 18:43:31,931 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:45:28,523 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 1
2024-05-27 18:45:28,575 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:45:39,298 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 1
2024-05-27 18:45:39,348 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:45:54,919 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 1
2024-05-27 18:45:54,968 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:46:22,676 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py changed, reloading.
2024-05-27 18:46:23,008 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:46:25,292 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 1
2024-05-27 18:46:44,642 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 18:46:44,648 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}
2024-05-27 18:46:44,681 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
               ^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/template/response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 726, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 682, in get_context
    'content': self.get_content(renderer, data, accepted_media_type, renderer_context),
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 412, in get_content
    content = renderer.render(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 99, in render
    ret = json.dumps(
          ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/json.py", line 25, in dumps
    return json.dumps(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/encoders.py", line 67, in default
    return super().default(obj)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ListSerializer is not JSON serializable
2024-05-27 18:46:44,721 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:47:06,638 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 18:47:06,639 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}
2024-05-27 18:47:06,670 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
               ^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/template/response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 726, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 682, in get_context
    'content': self.get_content(renderer, data, accepted_media_type, renderer_context),
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 412, in get_content
    content = renderer.render(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 99, in render
    ret = json.dumps(
          ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/json.py", line 25, in dumps
    return json.dumps(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/encoders.py", line 67, in default
    return super().default(obj)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ListSerializer is not JSON serializable
2024-05-27 18:48:05,517 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 18:48:05,521 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}
2024-05-27 18:48:05,552 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
               ^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/template/response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 726, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 682, in get_context
    'content': self.get_content(renderer, data, accepted_media_type, renderer_context),
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 412, in get_content
    content = renderer.render(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 99, in render
    ret = json.dumps(
          ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/json.py", line 25, in dumps
    return json.dumps(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/encoders.py", line 67, in default
    return super().default(obj)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ListSerializer is not JSON serializable
2024-05-27 18:49:00,638 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py changed, reloading.
2024-05-27 18:49:00,983 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:49:52,770 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 18:49:52,776 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}
2024-05-27 18:49:52,821 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
               ^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/template/response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 726, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 682, in get_context
    'content': self.get_content(renderer, data, accepted_media_type, renderer_context),
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 412, in get_content
    content = renderer.render(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 99, in render
    ret = json.dumps(
          ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/json.py", line 25, in dumps
    return json.dumps(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/encoders.py", line 67, in default
    return super().default(obj)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ListSerializer is not JSON serializable
2024-05-27 18:52:26,480 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/requests/search_engine_enriched_search_listing_request.py changed, reloading.
2024-05-27 18:52:26,779 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:54:56,589 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/search_listing_handler.py changed, reloading.
2024-05-27 18:54:56,912 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:54:59,961 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 18:54:59,965 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: [{'sql': "\n                SELECT VERSION(),\n                       @@sql_mode,\n                       @@default_storage_engine,\n                       @@sql_auto_is_null,\n                       @@lower_case_table_names,\n                       CONVERT_TZ('2001-01-01 01:00:00', 'UTC', 'UTC') IS NOT NULL\n            ", 'time': '0.000'}, {'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}, {'sql': 'SELECT `geo_region`.`id`, `geo_region`.`name`, `geo_region`.`city_id`, `geo_region`.`latitude`, `geo_region`.`longitude` FROM `geo_region` WHERE `geo_region`.`id` = 1 LIMIT 21', 'time': '0.000'}]
2024-05-27 18:55:00,001 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
               ^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/template/response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 726, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 682, in get_context
    'content': self.get_content(renderer, data, accepted_media_type, renderer_context),
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 412, in get_content
    content = renderer.render(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 99, in render
    ret = json.dumps(
          ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/json.py", line 25, in dumps
    return json.dumps(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/encoders.py", line 67, in default
    return super().default(obj)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ListSerializer is not JSON serializable
2024-05-27 18:55:00,044 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 18:55:13,178 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 18:55:13,179 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: [{'sql': "\n                SELECT VERSION(),\n                       @@sql_mode,\n                       @@default_storage_engine,\n                       @@sql_auto_is_null,\n                       @@lower_case_table_names,\n                       CONVERT_TZ('2001-01-01 01:00:00', 'UTC', 'UTC') IS NOT NULL\n            ", 'time': '0.004'}, {'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}, {'sql': 'SELECT `geo_region`.`id`, `geo_region`.`name`, `geo_region`.`city_id`, `geo_region`.`latitude`, `geo_region`.`longitude` FROM `geo_region` WHERE `geo_region`.`id` = 1 LIMIT 21', 'time': '0.000'}]
2024-05-27 18:55:13,210 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
               ^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/template/response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 726, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 682, in get_context
    'content': self.get_content(renderer, data, accepted_media_type, renderer_context),
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 412, in get_content
    content = renderer.render(data, accepted_media_type, renderer_context)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/renderers.py", line 99, in render
    ret = json.dumps(
          ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/json.py", line 25, in dumps
    return json.dumps(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/utils/encoders.py", line 67, in default
    return super().default(obj)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ListSerializer is not JSON serializable
2024-05-27 18:56:10,325 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py changed, reloading.
2024-05-27 18:56:10,629 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 18:56:12,417 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 18:56:12,421 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: [{'sql': "\n                SELECT VERSION(),\n                       @@sql_mode,\n                       @@default_storage_engine,\n                       @@sql_auto_is_null,\n                       @@lower_case_table_names,\n                       CONVERT_TZ('2001-01-01 01:00:00', 'UTC', 'UTC') IS NOT NULL\n            ", 'time': '0.000'}, {'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.000'}, {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}, {'sql': 'SELECT `geo_region`.`id`, `geo_region`.`name`, `geo_region`.`city_id`, `geo_region`.`latitude`, `geo_region`.`longitude` FROM `geo_region` WHERE `geo_region`.`id` = 1 LIMIT 21', 'time': '0.000'}]
2024-05-27 18:56:29,641 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 18:56:29,643 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}, {'sql': 'SELECT `geo_region`.`id`, `geo_region`.`name`, `geo_region`.`city_id`, `geo_region`.`latitude`, `geo_region`.`longitude` FROM `geo_region` WHERE `geo_region`.`id` = 1 LIMIT 21', 'time': '0.000'}]
2024-05-27 19:04:59,245 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 19:04:59,248 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: [{'sql': "\n                SELECT VERSION(),\n                       @@sql_mode,\n                       @@default_storage_engine,\n                       @@sql_auto_is_null,\n                       @@lower_case_table_names,\n                       CONVERT_TZ('2001-01-01 01:00:00', 'UTC', 'UTC') IS NOT NULL\n            ", 'time': '0.001'}, {'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}, {'sql': 'SELECT `geo_region`.`id`, `geo_region`.`name`, `geo_region`.`city_id`, `geo_region`.`latitude`, `geo_region`.`longitude` FROM `geo_region` WHERE `geo_region`.`id` = 1 LIMIT 21', 'time': '0.000'}]
2024-05-27 19:05:03,454 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 19:05:03,455 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}, {'sql': 'SELECT `geo_region`.`id`, `geo_region`.`name`, `geo_region`.`city_id`, `geo_region`.`latitude`, `geo_region`.`longitude` FROM `geo_region` WHERE `geo_region`.`id` = 1 LIMIT 21', 'time': '0.000'}]
2024-05-27 19:05:09,886 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 19:05:09,889 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.000'}, {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}, {'sql': 'SELECT `geo_region`.`id`, `geo_region`.`name`, `geo_region`.`city_id`, `geo_region`.`latitude`, `geo_region`.`longitude` FROM `geo_region` WHERE `geo_region`.`id` = 1 LIMIT 21', 'time': '0.000'}]
2024-05-27 19:05:47,758 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py changed, reloading.
2024-05-27 19:05:48,100 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:06:59,215 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Unauthorized: /payment/
2024-05-27 19:06:59,334 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 27 -> Request <rest_framework.request.Request: GET '/payment/'> with order_id: None received
2024-05-27 19:07:03,926 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 27 -> Request <rest_framework.request.Request: GET '/payment/24/'> with order_id: 24 received
2024-05-27 19:07:03,927 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 43 -> Payment with order_id: 24 does not exist 
 Payment matching query does not exist.
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 35, in get
    payment: Payment = Payment.objects.get(order_id=order_id)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 649, in get
    raise self.model.DoesNotExist(
payment.models.Payment.DoesNotExist: Payment matching query does not exist.
2024-05-27 19:07:03,931 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /payment/24/
2024-05-27 19:09:00,337 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 27 -> Request <rest_framework.request.Request: GET '/payment/'> with order_id: None received
2024-05-27 19:10:13,772 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:10:13,774 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: User matching query does not exist.
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 50, in post
    user: Optional[User] = User.objects.get(id=request.data.get('user_id', None))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 649, in get
    raise self.model.DoesNotExist(
django.contrib.auth.models.User.DoesNotExist: User matching query does not exist.
2024-05-27 19:10:13,777 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:10:45,522 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py changed, reloading.
2024-05-27 19:10:45,835 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:12:06,052 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:12:06,053 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Field 'id' expected a number but got <User: admin>.
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/fields/__init__.py", line 2117, in get_prep_value
    return int(value)
           ^^^^^^^^^^
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'User'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 50, in post
    user: Optional[User] = User.objects.get(id=request.user)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 635, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/query.py", line 1613, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/query.py", line 1645, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/query.py", line 1559, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/query.py", line 1389, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/lookups.py", line 364, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/lookups.py", line 88, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/fields/__init__.py", line 2119, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <User: admin>.
2024-05-27 19:12:06,075 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:12:23,868 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py changed, reloading.
2024-05-27 19:12:24,230 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:12:27,075 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:12:27,075 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Field 'id' expected a number but got <User: admin>.
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/fields/__init__.py", line 2117, in get_prep_value
    return int(value)
           ^^^^^^^^^^
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'User'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 50, in post
    user: Optional[User] = User.objects.get(id=request.user).id
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 635, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/query.py", line 1613, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/query.py", line 1645, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/query.py", line 1559, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/query.py", line 1389, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/lookups.py", line 364, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/lookups.py", line 88, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/fields/__init__.py", line 2119, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <User: admin>.
2024-05-27 19:12:27,090 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:12:49,183 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py changed, reloading.
2024-05-27 19:12:49,450 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:12:50,582 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:12:50,585 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: 'tuple' object has no attribute 'value'
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 42, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 20, in handle
    valid_values=[choice.value for choice in Payment.Currency.choices])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 20, in <listcomp>
    valid_values=[choice.value for choice in Payment.Currency.choices])
                  ^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'value'
2024-05-27 19:12:50,596 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:15:31,657 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py changed, reloading.
2024-05-27 19:15:31,991 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:15:41,443 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py changed, reloading.
2024-05-27 19:15:41,701 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:15:43,238 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:15:43,239 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: 'tuple' object has no attribute 'value'
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 42, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 21, in handle
    valid_values=[choice.value for choice in Payment.Currency.choices])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 21, in <listcomp>
    valid_values=[choice.value for choice in Payment.Currency.choices])
                  ^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'value'
2024-05-27 19:15:43,250 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:16:21,077 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py changed, reloading.
2024-05-27 19:16:21,389 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:16:24,609 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py changed, reloading.
2024-05-27 19:16:24,805 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:16:27,630 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:16:27,631 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: 'tuple' object has no attribute 'value'
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 42, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 21, in handle
    valid_values=[choice.value for choice in Payment.Currency.choices])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 21, in <listcomp>
    valid_values=[choice.value for choice in Payment.Currency.choices])
                  ^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'value'
2024-05-27 19:16:27,644 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:22:53,924 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py changed, reloading.
2024-05-27 19:22:54,257 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:22:58,255 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 27 -> Request <rest_framework.request.Request: GET '/payment/'> with order_id: None received
2024-05-27 19:23:21,648 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 30000, 'currency': 'INR'}
2024-05-27 19:23:21,649 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 42, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 18, in handle
    raise PaymentAttributesInvalidException(attribute_name='amount',
exceptions.payment.payment_attributes_invalid_exception.PaymentAttributesInvalidException: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
2024-05-27 19:23:21,652 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:24:02,548 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/exceptions/payment/payment_attributes_invalid_exception.py changed, reloading.
2024-05-27 19:24:02,867 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:24:04,744 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 30000, 'currency': 'INR'}
2024-05-27 19:24:04,745 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 42, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 18, in handle
    raise PaymentAttributesInvalidException(attribute_name='amount',
exceptions.payment.payment_attributes_invalid_exception.PaymentAttributesInvalidException: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
2024-05-27 19:24:04,758 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:24:08,347 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 30000, 'currency': 'INR'}
2024-05-27 19:24:08,347 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 42, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 18, in handle
    raise PaymentAttributesInvalidException(attribute_name='amount',
exceptions.payment.payment_attributes_invalid_exception.PaymentAttributesInvalidException: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
2024-05-27 19:24:08,349 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:24:28,825 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/exceptions/payment/payment_attributes_invalid_exception.py changed, reloading.
2024-05-27 19:24:29,110 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:24:30,458 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 30000, 'currency': 'INR'}
2024-05-27 19:24:30,458 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Payment Attribute amount has value 30000Payment Attribute amount must have value = Listing Price : 25000.0
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 42, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 18, in handle
    raise PaymentAttributesInvalidException(attribute_name='amount',
exceptions.payment.payment_attributes_invalid_exception.PaymentAttributesInvalidException: Payment Attribute amount has value 30000Payment Attribute amount must have value = Listing Price : 25000.0
2024-05-27 19:24:30,469 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:26:12,352 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/exceptions/payment/payment_attributes_invalid_exception.py changed, reloading.
2024-05-27 19:26:12,666 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:26:23,067 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 30000, 'currency': 'INR'}
2024-05-27 19:26:23,067 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 42, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 18, in handle
    raise PaymentAttributesInvalidException(attribute_name='amount',
exceptions.payment.payment_attributes_invalid_exception.PaymentAttributesInvalidException: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
2024-05-27 19:26:23,080 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:28:24,914 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 19:28:25,248 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:28:31,265 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:28:31,267 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: 
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 45, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 58, in generate_response_payload_from_tail_handler
    assert isinstance(response, PaymentInitiationResponse)
AssertionError
2024-05-27 19:28:31,279 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:29:45,953 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py changed, reloading.
2024-05-27 19:29:46,262 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:29:47,427 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:29:48,704 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:30:06,448 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 30000, 'currency': 'INR'}
2024-05-27 19:30:06,450 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 42, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 18, in handle
    raise PaymentAttributesInvalidException(attribute_name='amount',
exceptions.payment.payment_attributes_invalid_exception.PaymentAttributesInvalidException: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
2024-05-27 19:30:06,458 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:30:15,653 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:30:15,655 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: 
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 45, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 59, in generate_response_payload_from_tail_handler
    assert isinstance(response, PaymentInitiationResponse)
AssertionError
2024-05-27 19:30:15,657 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:30:23,654 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:30:25,037 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:31:16,109 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py changed, reloading.
2024-05-27 19:31:16,443 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:31:25,256 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:31:25,258 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: 
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 45, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 59, in generate_response_payload_from_tail_handler
    assert isinstance(response, PaymentInitiationResponse)
AssertionError
2024-05-27 19:31:25,270 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:31:28,453 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:32:54,716 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py changed, reloading.
2024-05-27 19:32:55,030 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:33:04,440 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:33:04,442 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: 
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 46, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 60, in generate_response_payload_from_tail_handler
    assert isinstance(response, PaymentInitiationResponse)
AssertionError
2024-05-27 19:33:04,456 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:33:24,122 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py changed, reloading.
2024-05-27 19:33:24,403 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:33:25,720 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:33:25,721 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: 
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 46, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 60, in generate_response_payload_from_tail_handler
    assert isinstance(response, PaymentInitiationResponse)
AssertionError
2024-05-27 19:33:25,732 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:34:36,875 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py changed, reloading.
2024-05-27 19:34:37,205 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:34:40,342 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:34:40,344 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: 
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 47, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 61, in generate_response_payload_from_tail_handler
    assert isinstance(response, PaymentInitiationResponse)
AssertionError
2024-05-27 19:34:40,356 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:35:04,184 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py changed, reloading.
2024-05-27 19:35:04,472 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:35:06,856 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:35:07,866 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 40 -> Exception Occurred -> {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 27, in handle
    order_id: str = self.generate_order(user=request.get_request_attribute(attribute='user'),
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 67, in generate_order
    if payment_serializer.is_valid(raise_exception=True):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/serializers.py", line 231, in is_valid
    raise ValidationError(self.errors)
rest_framework.exceptions.ValidationError: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
2024-05-27 19:35:07,870 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 45, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 41, in handle
    raise exception
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 27, in handle
    order_id: str = self.generate_order(user=request.get_request_attribute(attribute='user'),
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 67, in generate_order
    if payment_serializer.is_valid(raise_exception=True):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/serializers.py", line 231, in is_valid
    raise ValidationError(self.errors)
rest_framework.exceptions.ValidationError: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
2024-05-27 19:35:07,889 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:36:21,194 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 30000, 'currency': 'INR'}
2024-05-27 19:36:21,196 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 45, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 18, in handle
    raise PaymentAttributesInvalidException(attribute_name='amount',
exceptions.payment.payment_attributes_invalid_exception.PaymentAttributesInvalidException: Payment Attribute amount has value 30000
Payment Attribute amount must have value = Listing Price : 25000.0
2024-05-27 19:36:21,199 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:36:43,967 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:36:44,979 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 40 -> Exception Occurred -> {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 27, in handle
    order_id: str = self.generate_order(user=request.get_request_attribute(attribute='user'),
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 67, in generate_order
    if payment_serializer.is_valid(raise_exception=True):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/serializers.py", line 231, in is_valid
    raise ValidationError(self.errors)
rest_framework.exceptions.ValidationError: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
2024-05-27 19:36:44,980 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 45, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 41, in handle
    raise exception
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 27, in handle
    order_id: str = self.generate_order(user=request.get_request_attribute(attribute='user'),
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 67, in generate_order
    if payment_serializer.is_valid(raise_exception=True):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/serializers.py", line 231, in is_valid
    raise ValidationError(self.errors)
rest_framework.exceptions.ValidationError: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
2024-05-27 19:36:44,985 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:38:33,061 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 19:38:33,362 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:38:34,361 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:38:35,378 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 40 -> Exception Occurred -> {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 27, in handle
    order_id: str = self.generate_order(user=request.get_request_attribute(attribute='user'),
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 69, in generate_order
    if payment_serializer.is_valid(raise_exception=True):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/serializers.py", line 231, in is_valid
    raise ValidationError(self.errors)
rest_framework.exceptions.ValidationError: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
2024-05-27 19:38:35,383 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 45, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 41, in handle
    raise exception
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 27, in handle
    order_id: str = self.generate_order(user=request.get_request_attribute(attribute='user'),
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 69, in generate_order
    if payment_serializer.is_valid(raise_exception=True):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/serializers.py", line 231, in is_valid
    raise ValidationError(self.errors)
rest_framework.exceptions.ValidationError: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
2024-05-27 19:38:35,411 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:39:03,435 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 19:39:03,724 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:39:05,676 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:39:26,938 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:43:33,234 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 19:43:33,558 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:43:35,756 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:43:36,775 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 40 -> Exception Occurred -> {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 27, in handle
    order_id: str = self.generate_order(user=request.get_request_attribute(attribute='user'),
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 69, in generate_order
    if payment_serializer.is_valid(raise_exception=True):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/serializers.py", line 231, in is_valid
    raise ValidationError(self.errors)
rest_framework.exceptions.ValidationError: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
2024-05-27 19:43:36,780 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 45, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 41, in handle
    raise exception
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 27, in handle
    order_id: str = self.generate_order(user=request.get_request_attribute(attribute='user'),
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py", line 69, in generate_order
    if payment_serializer.is_valid(raise_exception=True):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/serializers.py", line 231, in is_valid
    raise ValidationError(self.errors)
rest_framework.exceptions.ValidationError: {'user': [ErrorDetail(string='Incorrect type. Expected pk value, received User.', code='incorrect_type')], 'listing': [ErrorDetail(string='Incorrect type. Expected pk value, received Listing.', code='incorrect_type')]}
2024-05-27 19:43:36,808 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 19:46:21,907 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 19:46:22,249 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:46:48,154 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 19:46:48,441 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:46:55,670 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:46:56,695 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 75 -> Queries executed:: [{'sql': "\n                SELECT VERSION(),\n                       @@sql_mode,\n                       @@default_storage_engine,\n                       @@sql_auto_is_null,\n                       @@lower_case_table_names,\n                       CONVERT_TZ('2001-01-01 01:00:00', 'UTC', 'UTC') IS NOT NULL\n            ", 'time': '0.001'}, {'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 1 LIMIT 21 FOR UPDATE NOWAIT', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = '$(4msENsx~qlgXh-#BxmR)B0Q' LIMIT 1", 'time': '0.001'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 1 LIMIT 21', 'time': '0.000'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('$(4msENsx~qlgXh-#BxmR)B0Q', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 19:46:56.677483', 1, 1)", 'time': '0.006'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 1, `available_from` = '2024-05-27 18:43:24.391898', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 1", 'time': '0.002'}]
2024-05-27 19:46:56,700 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 57 -> NoneRequest Instance returned for response -> Response({'order_id': '$(4msENsx~qlgXh-#BxmR)B0Q', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T19:46:56.677483Z', 'user': 1, 'listing': 1})
2024-05-27 19:46:56,700 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': '$(4msENsx~qlgXh-#BxmR)B0Q', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T19:46:56.677483Z', 'user': 1, 'listing': 1}
2024-05-27 19:47:06,384 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:47:18,414 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 19:47:18,419 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.000'}, {'sql': 'SELECT `geo_region`.`id`, `geo_region`.`name`, `geo_region`.`city_id`, `geo_region`.`latitude`, `geo_region`.`longitude` FROM `geo_region` WHERE `geo_region`.`id` = 1 LIMIT 21', 'time': '0.000'}]
2024-05-27 19:47:18,457 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:49:20,434 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:49:21,809 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:49:49,905 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:50:02,752 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:50:23,426 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:50:33,218 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: None
2024-05-27 19:50:33,221 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/search_engines/db_search_listing_engine.py : Line 27 -> DB Query Performed :: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `geo_city`.`id`, `geo_city`.`name`, `geo_city`.`latitude`, `geo_city`.`longitude`, `geo_city`.`mean_length_in_kms`, `geo_city`.`mean_breadth_in_kms` FROM `geo_city` WHERE `geo_city`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `geo_region`.`id`, `geo_region`.`name`, `geo_region`.`city_id`, `geo_region`.`latitude`, `geo_region`.`longitude` FROM `geo_region` WHERE `geo_region`.`id` = 1 LIMIT 21', 'time': '0.000'}]
2024-05-27 19:50:33,258 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:50:47,236 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 1
2024-05-27 19:50:47,273 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:56:44,738 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 19:56:45,071 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:56:49,266 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 27 -> Request <rest_framework.request.Request: GET '/payment/'> with order_id: None received
2024-05-27 19:56:49,321 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:57:08,488 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 2, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:57:18,515 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 75 -> Queries executed:: [{'sql': "\n                SELECT VERSION(),\n                       @@sql_mode,\n                       @@default_storage_engine,\n                       @@sql_auto_is_null,\n                       @@lower_case_table_names,\n                       CONVERT_TZ('2001-01-01 01:00:00', 'UTC', 'UTC') IS NOT NULL\n            ", 'time': '0.001'}, {'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21', 'time': '0.001'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21 FOR UPDATE NOWAIT', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = 'dFLtLL&k`$/Ua>$KJdcnvx~IB' LIMIT 1", 'time': '0.001'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21', 'time': '0.001'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('dFLtLL&k`$/Ua>$KJdcnvx~IB', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 19:57:18.496821', 1, 2)", 'time': '0.002'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 19:50:23.356192', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 2", 'time': '0.001'}]
2024-05-27 19:57:18,519 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 57 -> NoneRequest Instance returned for response -> Response({'order_id': 'dFLtLL&k`$/Ua>$KJdcnvx~IB', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T19:57:18.496821Z', 'user': 1, 'listing': 2})
2024-05-27 19:57:18,520 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': 'dFLtLL&k`$/Ua>$KJdcnvx~IB', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T19:57:18.496821Z', 'user': 1, 'listing': 2}
2024-05-27 19:57:25,508 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:57:34,432 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:57:43,074 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:57:48,546 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:57:56,806 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:58:07,133 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 2, 'amount': 25000, 'currency': 'INR'}
2024-05-27 19:58:10,776 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 19:58:15,537 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 19:58:15,578 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:58:17,146 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 75 -> Queries executed:: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21 FOR UPDATE NOWAIT', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = 'zMvA+kd0w8^s=y,<x/1hFEW@C' LIMIT 1", 'time': '0.001'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21', 'time': '0.000'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('zMvA+kd0w8^s=y,<x/1hFEW@C', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 19:58:17.140149', 1, 2)", 'time': '0.001'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 19:50:23.356192', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 2", 'time': '0.000'}]
2024-05-27 19:58:17,150 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 57 -> NoneRequest Instance returned for response -> Response({'order_id': 'zMvA+kd0w8^s=y,<x/1hFEW@C', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T19:58:17.140149Z', 'user': 1, 'listing': 2})
2024-05-27 19:58:17,150 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': 'zMvA+kd0w8^s=y,<x/1hFEW@C', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T19:58:17.140149Z', 'user': 1, 'listing': 2}
2024-05-27 19:58:23,045 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 19:58:23,079 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:59:27,371 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 19:59:27,689 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 19:59:31,658 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 19:59:31,708 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:59:34,954 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 19:59:38,862 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:00:08,157 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /listing/2/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ListingApi.post() got an unexpected keyword argument 'listing_id'
2024-05-27 20:00:24,787 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 2, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:00:28,989 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 20:00:29,033 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:00:45,964 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:00:47,053 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:00:50,496 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 20:00:53,702 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 20:00:53,740 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:00:54,809 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 75 -> Queries executed:: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21 FOR UPDATE NOWAIT', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = '5LT%90Xy1luVigrQH<t!lS>ex' LIMIT 1", 'time': '0.002'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21', 'time': '0.001'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('5LT%90Xy1luVigrQH<t!lS>ex', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 20:00:54.794981', 1, 2)", 'time': '0.001'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 19:50:23.356192', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 2", 'time': '0.001'}]
2024-05-27 20:00:54,814 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 57 -> NoneRequest Instance returned for response -> Response({'order_id': '5LT%90Xy1luVigrQH<t!lS>ex', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:00:54.794981Z', 'user': 1, 'listing': 2})
2024-05-27 20:00:54,814 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': '5LT%90Xy1luVigrQH<t!lS>ex', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:00:54.794981Z', 'user': 1, 'listing': 2}
2024-05-27 20:02:08,237 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:02:10,949 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 2
2024-05-27 20:02:10,986 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:08:03,040 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py changed, reloading.
2024-05-27 20:08:03,399 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:08:14,938 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 2, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:08:44,969 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 75 -> Queries executed:: [{'sql': "\n                SELECT VERSION(),\n                       @@sql_mode,\n                       @@default_storage_engine,\n                       @@sql_auto_is_null,\n                       @@lower_case_table_names,\n                       CONVERT_TZ('2001-01-01 01:00:00', 'UTC', 'UTC') IS NOT NULL\n            ", 'time': '0.000'}, {'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21 FOR UPDATE NOWAIT', 'time': '0.002'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = 'CK,bpu&qvdc7h4EDO35/?bmCr' LIMIT 1", 'time': '0.002'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 2 LIMIT 21', 'time': '0.000'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('CK,bpu&qvdc7h4EDO35/?bmCr', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 20:08:44.942255', 1, 2)", 'time': '0.006'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 19:50:23.356192', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 2", 'time': '0.002'}]
2024-05-27 20:08:44,974 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': 'CK,bpu&qvdc7h4EDO35/?bmCr', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:08:44.942255Z', 'user': 1, 'listing': 2}
2024-05-27 20:09:09,328 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:09:12,955 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:09:43,569 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:10:00,948 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:10:11,030 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:10:20,483 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:10:26,493 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:10:35,042 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 66 -> Request -> request.data : {'listing_id': 3, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:10:35,043 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 76 -> {'price': [ErrorDetail(string='This field is required.', code='required')], 'state': [ErrorDetail(string='This field is required.', code='required')], 'city': [ErrorDetail(string='This field is required.', code='required')], 'region': [ErrorDetail(string='This field is required.', code='required')], 'property': [ErrorDetail(string='This field is required.', code='required')]}
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py", line 72, in post
    listing_serializer.is_valid(raise_exception=True)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/serializers.py", line 231, in is_valid
    raise ValidationError(self.errors)
rest_framework.exceptions.ValidationError: {'price': [ErrorDetail(string='This field is required.', code='required')], 'state': [ErrorDetail(string='This field is required.', code='required')], 'city': [ErrorDetail(string='This field is required.', code='required')], 'region': [ErrorDetail(string='This field is required.', code='required')], 'property': [ErrorDetail(string='This field is required.', code='required')]}
2024-05-27 20:10:35,048 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /listing/
2024-05-27 20:10:49,191 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 3, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:10:54,296 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:10:54,334 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:11:19,217 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 75 -> Queries executed:: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21 FOR UPDATE NOWAIT', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = 'UABE=Fl7r)MSr)D`&rA)BLCZU' LIMIT 1", 'time': '0.002'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.001'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('UABE=Fl7r)MSr)D`&rA)BLCZU', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 20:11:19.199386', 1, 3)", 'time': '0.001'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 20:10:20.412524', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 3", 'time': '0.000'}]
2024-05-27 20:11:19,221 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': 'UABE=Fl7r)MSr)D`&rA)BLCZU', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:11:19.199386Z', 'user': 1, 'listing': 3}
2024-05-27 20:11:30,031 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:11:30,068 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:11:33,616 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 27 -> Request <rest_framework.request.Request: GET '/payment/'> with order_id: None received
2024-05-27 20:13:37,008 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py changed, reloading.
2024-05-27 20:13:37,383 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:13:53,078 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:13:54,026 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:14:00,389 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:14:10,783 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 3, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:14:17,721 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:14:25,382 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:14:30,193 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:14:30,224 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:14:40,819 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 76 -> Queries executed:: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21 FOR UPDATE NOWAIT', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = 'N<qnZJZQS(1?K@R,7ppgtp(y@' LIMIT 1", 'time': '0.002'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('N<qnZJZQS(1?K@R,7ppgtp(y@', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 20:14:40.790991', 1, 3)", 'time': '0.007'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 20:10:20.412524', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 3", 'time': '0.001'}]
2024-05-27 20:14:40,824 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 56 -> NoneRequest Instance returned for response -> Response({'order_id': 'N<qnZJZQS(1?K@R,7ppgtp(y@', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:14:40.790991Z', 'user': 1, 'listing': 3})
2024-05-27 20:14:40,824 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': 'N<qnZJZQS(1?K@R,7ppgtp(y@', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:14:40.790991Z', 'user': 1, 'listing': 3}
2024-05-27 20:15:23,677 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:15:23,722 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:15:25,215 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:17:42,915 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 20:17:43,285 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:17:46,906 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:17:48,897 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:17:54,907 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:18:09,185 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 3, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:18:12,547 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:18:39,203 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 76 -> Queries executed:: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21 FOR UPDATE', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = 'ochjdm9f%L*&MMs)u&`e%q45#' LIMIT 1", 'time': '0.001'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.001'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('ochjdm9f%L*&MMs)u&`e%q45#', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 20:18:39.192817', 1, 3)", 'time': '0.002'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 20:10:20.412524', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 3", 'time': '0.001'}]
2024-05-27 20:18:39,206 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 56 -> NoneRequest Instance returned for response -> Response({'order_id': 'ochjdm9f%L*&MMs)u&`e%q45#', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:18:39.192817Z', 'user': 1, 'listing': 3})
2024-05-27 20:18:39,207 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': 'ochjdm9f%L*&MMs)u&`e%q45#', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:18:39.192817Z', 'user': 1, 'listing': 3}
2024-05-27 20:23:06,370 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:23:17,304 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:23:18,360 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:23:24,711 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:23:48,740 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 20:23:49,121 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:23:53,241 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 3, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:24:09,770 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:24:33,503 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:24:38,597 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:24:44,098 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:24:45,599 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:24:46,522 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:24:47,228 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:24:47,975 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:24:53,262 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 76 -> Queries executed:: [{'sql': "\n                SELECT VERSION(),\n                       @@sql_mode,\n                       @@default_storage_engine,\n                       @@sql_auto_is_null,\n                       @@lower_case_table_names,\n                       CONVERT_TZ('2001-01-01 01:00:00', 'UTC', 'UTC') IS NOT NULL\n            ", 'time': '0.000'}, {'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21 FOR UPDATE', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = '~8O^d(0C`RiE1,7C.+Q-21,M`' LIMIT 1", 'time': '0.002'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('~8O^d(0C`RiE1,7C.+Q-21,M`', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 20:24:53.248626', 1, 3)", 'time': '0.002'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 20:10:20.412524', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 3", 'time': '0.001'}]
2024-05-27 20:24:53,267 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 56 -> NoneRequest Instance returned for response -> Response({'order_id': '~8O^d(0C`RiE1,7C.+Q-21,M`', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:24:53.248626Z', 'user': 1, 'listing': 3})
2024-05-27 20:24:53,267 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': '~8O^d(0C`RiE1,7C.+Q-21,M`', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:24:53.248626Z', 'user': 1, 'listing': 3}
2024-05-27 20:24:59,576 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:24:59,605 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:25:00,438 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:25:01,329 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:25:02,921 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:25:08,779 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 20:25:24,177 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 20:25:24,477 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:25:40,277 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 3, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:25:40,279 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Payment Attribute amount has value 25000
Payment Attribute amount must have value = Listing Price : 26000.0
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 44, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 18, in handle
    raise PaymentAttributesInvalidException(attribute_name='amount',
exceptions.payment.payment_attributes_invalid_exception.PaymentAttributesInvalidException: Payment Attribute amount has value 25000
Payment Attribute amount must have value = Listing Price : 26000.0
2024-05-27 20:25:40,284 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 20:26:01,235 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 1, 'amount': 26000, 'currency': 'INR'}
2024-05-27 20:26:01,236 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Payment Attribute amount has value 26000
Payment Attribute amount must have value = Listing Price : 25000.0
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 44, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 18, in handle
    raise PaymentAttributesInvalidException(attribute_name='amount',
exceptions.payment.payment_attributes_invalid_exception.PaymentAttributesInvalidException: Payment Attribute amount has value 26000
Payment Attribute amount must have value = Listing Price : 25000.0
2024-05-27 20:26:01,238 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 20:31:34,984 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 20:31:35,323 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:32:04,369 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 20:32:04,651 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:32:26,532 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 3, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:32:26,533 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 63 -> Exception Occurred: Payment Attribute amount has value 25000
Payment Attribute amount must have value = Listing Price : 27000.0
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py", line 54, in post
    response: Dict[str, Any] = PaymentInitiationFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py", line 44, in process_request
    response: Response = current_handler.handle(request=request)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/payment_attributes_validation_handler.py", line 18, in handle
    raise PaymentAttributesInvalidException(attribute_name='amount',
exceptions.payment.payment_attributes_invalid_exception.PaymentAttributesInvalidException: Payment Attribute amount has value 25000
Payment Attribute amount must have value = Listing Price : 27000.0
2024-05-27 20:32:26,541 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Bad Request: /payment/
2024-05-27 20:32:50,447 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 3, 'amount': 27000, 'currency': 'INR'}
2024-05-27 20:33:50,470 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 76 -> Queries executed:: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21 FOR UPDATE', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = '/|NdE>$pM3T)o!x*!l32#-Bww' LIMIT 1", 'time': '0.002'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('/|NdE>$pM3T)o!x*!l32#-Bww', '', '', 27000.0e0, 0.0e0, 27000.0e0, 'INR', 'created', '2024-05-27 20:33:50.453511', 1, 3)", 'time': '0.001'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 20:10:20.412524', `price` = 27000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 3", 'time': '0.001'}]
2024-05-27 20:33:50,477 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 56 -> NoneRequest Instance returned for response -> Response({'order_id': '/|NdE>$pM3T)o!x*!l32#-Bww', 'payment_id': '', 'payment_signature': '', 'amount': 27000.0, 'amount_paid': 0.0, 'amount_due': 27000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:33:50.453511Z', 'user': 1, 'listing': 3})
2024-05-27 20:33:50,477 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': '/|NdE>$pM3T)o!x*!l32#-Bww', 'payment_id': '', 'payment_signature': '', 'amount': 27000.0, 'amount_paid': 0.0, 'amount_due': 27000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:33:50.453511Z', 'user': 1, 'listing': 3}
2024-05-27 20:34:20,976 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 27 -> Request <rest_framework.request.Request: GET '/payment/'> with order_id: None received
2024-05-27 20:37:30,380 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 3, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:37:34,412 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:37:38,392 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/listing/views.py : Line 30 -> Request -> request.data : {} with listing_id: 3
2024-05-27 20:38:30,400 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 76 -> Queries executed:: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21 FOR UPDATE', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = 'RL(Fr~L0QVktnP$UDewn?mi3b' LIMIT 1", 'time': '0.001'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.001'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('RL(Fr~L0QVktnP$UDewn?mi3b', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 20:38:30.387657', 1, 3)", 'time': '0.001'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 20:10:20.412524', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 3", 'time': '0.000'}]
2024-05-27 20:38:30,404 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 56 -> NoneRequest Instance returned for response -> Response({'order_id': 'RL(Fr~L0QVktnP$UDewn?mi3b', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:38:30.387657Z', 'user': 1, 'listing': 3})
2024-05-27 20:38:30,405 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': 'RL(Fr~L0QVktnP$UDewn?mi3b', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:38:30.387657Z', 'user': 1, 'listing': 3}
2024-05-27 20:39:21,806 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 20:39:22,219 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:39:50,922 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 3, 'amount': 25000, 'currency': 'INR'}
2024-05-27 20:40:50,951 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 76 -> Queries executed:: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21 FOR UPDATE NOWAIT', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = '~)w1VL7jzzC9+P*izSUkC`@6d' LIMIT 1", 'time': '0.003'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.001'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('~)w1VL7jzzC9+P*izSUkC`@6d', '', '', 25000.0e0, 0.0e0, 25000.0e0, 'INR', 'created', '2024-05-27 20:40:50.929381', 1, 3)", 'time': '0.001'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 20:10:20.412524', `price` = 25000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 3", 'time': '0.001'}]
2024-05-27 20:40:50,957 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 56 -> NoneRequest Instance returned for response -> Response({'order_id': '~)w1VL7jzzC9+P*izSUkC`@6d', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:40:50.929381Z', 'user': 1, 'listing': 3})
2024-05-27 20:40:50,959 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': '~)w1VL7jzzC9+P*izSUkC`@6d', 'payment_id': '', 'payment_signature': '', 'amount': 25000.0, 'amount_paid': 0.0, 'amount_due': 25000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:40:50.929381Z', 'user': 1, 'listing': 3}
2024-05-27 20:48:10,981 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 20:48:11,358 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:50:26,665 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py changed, reloading.
2024-05-27 20:50:26,981 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:50:52,392 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 48 -> Request Received: {'listing_id': 3, 'amount': 26000, 'currency': 'INR'}
2024-05-27 20:50:53,413 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/payment/order_generation_handler.py : Line 74 -> Queries executed:: [{'sql': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED', 'time': '0.000'}, {'sql': "SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`username` = 'admin' LIMIT 21", 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': 'BEGIN', 'time': '0.000'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21 FOR UPDATE', 'time': '0.000'}, {'sql': "SELECT 1 AS `a` FROM `payment_payment` WHERE `payment_payment`.`order_id` = 'y5BD&>h^_R<^UmXDu,EXYEDz#' LIMIT 1", 'time': '0.001'}, {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`password`, `auth_user`.`last_login`, `auth_user`.`is_superuser`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 LIMIT 21', 'time': '0.001'}, {'sql': 'SELECT `listing_listing`.`id`, `listing_listing`.`state_id`, `listing_listing`.`city_id`, `listing_listing`.`region_id`, `listing_listing`.`property_id`, `listing_listing`.`available_from`, `listing_listing`.`price`, `listing_listing`.`is_available_for_booking` FROM `listing_listing` WHERE `listing_listing`.`id` = 3 LIMIT 21', 'time': '0.000'}, {'sql': "INSERT INTO `payment_payment` (`order_id`, `payment_id`, `payment_signature`, `amount`, `amount_paid`, `amount_due`, `currency`, `order_status`, `created_at`, `user_id`, `listing_id`) VALUES ('y5BD&>h^_R<^UmXDu,EXYEDz#', '', '', 26000.0e0, 0.0e0, 26000.0e0, 'INR', 'created', '2024-05-27 20:50:53.399357', 1, 3)", 'time': '0.002'}, {'sql': "UPDATE `listing_listing` SET `state_id` = 1, `city_id` = 1, `region_id` = 1, `property_id` = 2, `available_from` = '2024-05-27 20:10:20.412524', `price` = 26000.0e0, `is_available_for_booking` = 0 WHERE `listing_listing`.`id` = 3", 'time': '0.001'}]
2024-05-27 20:50:53,417 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/payment/payment_initiation_flow.py : Line 56 -> NoneRequest Instance returned for response -> Response({'order_id': 'y5BD&>h^_R<^UmXDu,EXYEDz#', 'payment_id': '', 'payment_signature': '', 'amount': 26000.0, 'amount_paid': 0.0, 'amount_due': 26000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:50:53.399357Z', 'user': 1, 'listing': 3})
2024-05-27 20:50:53,417 : DEBUG (10) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/payment/views.py : Line 60 -> Response: {'order_id': 'y5BD&>h^_R<^UmXDu,EXYEDz#', 'payment_id': '', 'payment_signature': '', 'amount': 26000.0, 'amount_paid': 0.0, 'amount_due': 26000.0, 'currency': 'INR', 'order_status': 'created', 'created_at': '2024-05-27T20:50:53.399357Z', 'user': 1, 'listing': 3}
2024-05-27 20:51:03,540 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /booking
2024-05-27 20:52:20,752 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/urls.py changed, reloading.
2024-05-27 20:52:21,078 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:53:11,479 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/airbnb/settings.py changed, reloading.
2024-05-27 20:53:11,796 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:53:14,589 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Unauthorized: /booking/
2024-05-27 20:53:14,712 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 20:56:25,821 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 35, in process_request
    request: Request = self.generate_request_for_head_handler(request_payload=request)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 44, in generate_request_for_head_handler
    return BookListingRequest(request_payload=request_payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/requests/booking/book_listing_request.py", line 12, in __init__
    super().__init__(request_payload=request_payload, mandatory_attributes=self.__class__.__MANDATORY_ATTRIBUTES)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/requests/request.py", line 12, in __init__
    self.__validate_request()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/requests/request.py", line 29, in __validate_request
    raise AttributeMissingInRequestPayloadException(request_payload=self.__request_payload, attribute_name=attribute)
exceptions.attribute_missing_in_request_payload_exception.AttributeMissingInRequestPayloadException: Attribute "user" Missing in Request Payload -> {'listing_id': 3, 'order_id': 'y5BD&>h^_R<^UmXDu,EXYEDz#', 'payment_id': 'abcd', 'payment_signature': 'abcd', 'booking_start_datetime': datetime.datetime(2024, 7, 22, 0, 0), 'booking_duration': 5}
2024-05-27 20:57:16,734 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py changed, reloading.
2024-05-27 20:57:17,073 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:57:50,243 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/requests/booking/book_listing_request.py changed, reloading.
2024-05-27 20:57:50,533 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:57:51,462 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 20:58:00,795 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 38, in process_request
    response = current_handler.handle(request=request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 18, in handle
    booking: Booking = self.book_listing(listing_id=request.get_request_attribute(attribute='listing_id'),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
TypeError: BookListingHandler.book_listing() got an unexpected keyword argument 'booking_start_date'
2024-05-27 20:58:41,218 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 20:58:41,522 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 20:58:43,995 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 20:58:46,986 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 38, in process_request
    response = current_handler.handle(request=request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 18, in handle
    booking: Booking = self.book_listing(listing_id=request.get_request_attribute(attribute='listing_id'),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 29, in book_listing
    listing.available_from = listing.available_from + booking_duration
                             ~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for +: 'datetime.datetime' and 'int'
2024-05-27 21:01:15,464 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 21:01:15,781 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:01:17,844 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:01:17,884 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:01:24,422 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 38, in process_request
    response = current_handler.handle(request=request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 18, in handle
    booking: Booking = self.book_listing(listing_id=request.get_request_attribute(attribute='listing_id'),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 41, in book_listing
    booking_end_datetime=booking_start_datetime+booking_duration,
                         ~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for +: 'NoneType' and 'datetime.timedelta'
2024-05-27 21:01:47,913 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 21:01:48,252 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:01:49,328 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:01:49,373 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:01:51,557 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 38, in process_request
    response = current_handler.handle(request=request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 18, in handle
    booking: Booking = self.book_listing(listing_id=request.get_request_attribute(attribute='listing_id'),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 29, in book_listing
    listing.available_from = booking_start_datetime + booking_duration
                             ~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for +: 'NoneType' and 'datetime.timedelta'
2024-05-27 21:03:02,698 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 21:03:03,037 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:03:31,079 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 21:03:31,350 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:03:32,776 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:03:32,820 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:03:36,135 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 38, in process_request
    response = current_handler.handle(request=request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 18, in handle
    booking: Booking = self.book_listing(listing_id=request.get_request_attribute(attribute='listing_id'),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 29, in book_listing
    listing.available_from = booking_start_datetime + booking_duration  # Very subtle way of doing this, although not correct
                             ~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for +: 'NoneType' and 'datetime.timedelta'
2024-05-27 21:04:06,023 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:04:40,662 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 21:04:40,964 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:04:42,415 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 38, in process_request
    response = current_handler.handle(request=request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 18, in handle
    booking: Booking = self.book_listing(listing_id=request.get_request_attribute(attribute='listing_id'),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 37, in book_listing
    booking: Booking = Booking(listing=listing,
                       ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/base.py", line 567, in __init__
    raise TypeError(
TypeError: Booking() got unexpected keyword arguments: 'booking_duration', 'booking'
2024-05-27 21:05:07,925 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:05:07,970 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:05:08,017 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 21:05:08,253 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:05:14,898 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 38, in process_request
    response = current_handler.handle(request=request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 18, in handle
    booking: Booking = self.book_listing(listing_id=request.get_request_attribute(attribute='listing_id'),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 37, in book_listing
    booking: Booking = Booking(listing=listing,
                       ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/base.py", line 567, in __init__
    raise TypeError(
TypeError: Booking() got unexpected keyword arguments: 'booking'
2024-05-27 21:05:37,315 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 21:05:37,633 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:05:38,347 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:05:38,395 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:05:41,618 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/fields/__init__.py", line 2117, in get_prep_value
    return int(value)
           ^^^^^^^^^^
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'datetime.timedelta'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 38, in process_request
    response = current_handler.handle(request=request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 18, in handle
    booking: Booking = self.book_listing(listing_id=request.get_request_attribute(attribute='listing_id'),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 43, in book_listing
    booking.save()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/base.py", line 822, in save
    self.save_base(
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/base.py", line 909, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/base.py", line 1071, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/base.py", line 1112, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1822, in execute_sql
    for sql, params in self.as_sql():
                       ^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1745, in as_sql
    value_rows = [
                 ^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1746, in <listcomp>
    [
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1747, in <listcomp>
    self.prepare_value(field, self.pre_save_val(field, obj))
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1686, in prepare_value
    return field.get_db_prep_save(value, connection=self.connection)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/fields/__init__.py", line 1013, in get_db_prep_save
    return self.get_db_prep_value(value, connection=connection, prepared=False)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/fields/__init__.py", line 2124, in get_db_prep_value
    value = super().get_db_prep_value(value, connection, prepared)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/fields/__init__.py", line 1006, in get_db_prep_value
    value = self.get_prep_value(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/fields/__init__.py", line 2119, in get_prep_value
    raise e.__class__(
TypeError: Field 'booking_duration_in_days' expected a number but got datetime.timedelta(seconds=5).
2024-05-27 21:06:06,655 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 21:06:06,952 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:06:08,702 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:06:08,740 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:06:11,236 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
MySQLdb.ProgrammingError: (1146, "Table 'airbnb.booking_booking' doesn't exist")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 38, in process_request
    response = current_handler.handle(request=request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 18, in handle
    booking: Booking = self.book_listing(listing_id=request.get_request_attribute(attribute='listing_id'),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 43, in book_listing
    booking.save()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/base.py", line 822, in save
    self.save_base(
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/base.py", line 909, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/base.py", line 1071, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/base.py", line 1112, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1823, in execute_sql
    cursor.execute(sql, params)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
django.db.utils.ProgrammingError: (1146, "Table 'airbnb.booking_booking' doesn't exist")
2024-05-27 21:06:38,274 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:06:41,835 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:06:46,205 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:06:51,426 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 41, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 53, in generate_response_payload_from_tail_handler
    assert type(response) is BookListingResponse
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2024-05-27 21:07:14,696 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:08:21,668 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py changed, reloading.
2024-05-27 21:08:22,007 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:08:27,151 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:08:28,916 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:08:30,658 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:08:33,221 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 42, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 54, in generate_response_payload_from_tail_handler
    assert type(response) is BookListingResponse
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2024-05-27 21:09:09,619 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py changed, reloading.
2024-05-27 21:09:09,941 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:09:11,191 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:09:14,876 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 42, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 54, in generate_response_payload_from_tail_handler
    assert isinstance(response, BookListingResponse)
AssertionError
2024-05-27 21:09:30,748 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py changed, reloading.
2024-05-27 21:09:31,036 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:09:32,440 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:09:32,478 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:09:34,962 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 42, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 55, in generate_response_payload_from_tail_handler
    assert isinstance(response, BookListingResponse)
AssertionError
2024-05-27 21:10:19,677 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py changed, reloading.
2024-05-27 21:10:20,001 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:10:20,665 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:10:27,092 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 43, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 56, in generate_response_payload_from_tail_handler
    assert isinstance(response, BookListingResponse)
AssertionError
2024-05-27 21:11:35,434 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py changed, reloading.
2024-05-27 21:11:35,734 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:11:37,891 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:11:37,931 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:11:47,655 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 44, in process_request
    return self.generate_response_payload_from_tail_handler(response=response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 57, in generate_response_payload_from_tail_handler
    assert isinstance(response, BookListingResponse)
AssertionError
2024-05-27 21:13:39,614 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 21:13:39,953 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:13:41,344 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:13:41,383 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
2024-05-27 21:13:48,011 : ERROR (40) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Internal Server Error: /booking/
Traceback (most recent call last):
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/booking/views.py", line 22, in post
    response: Dict[str, Any] = BookListingFlow().process_request(request={
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/flows/booking/book_listing_flow.py", line 40, in process_request
    response = current_handler.handle(request=request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py", line 24, in handle
    return BookListingResponse(response_payload={
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/responses/booking/book_listing_response.py", line 12, in __init__
    super().__init__(response_payload=response_payload, mandatory_attributes=self.__class__.__MANDATORY_ATTRIBUTES)
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/responses/response.py", line 12, in __init__
    self.__validate_response()
  File "/Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/responses/response.py", line 29, in __validate_response
    raise AttributeMissingInResponsePayloadException(response_payload=self.__response_payload, attribute_name=attribute)
exceptions.attribute_missing_in_response_payload_exception.AttributeMissingInResponsePayloadException: Attribute "property" Missing in Response Payload -> {'booking_id': 7, 'listing': Listing(Id: 3 Property: Property object (2) Price: 26000.0 AvailableFrom: 2024-07-27 00:00:00), 'booking_status': 'BOOKED'}
2024-05-27 21:15:54,348 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 266 -> /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/src/airbnb/handlers/booking/book_listing_handler.py changed, reloading.
2024-05-27 21:15:54,675 : INFO (20) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/autoreload.py : Line 668 -> Watching for file changes with StatReloader
2024-05-27 21:15:57,236 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Method Not Allowed: /booking/
2024-05-27 21:15:57,276 : WARNING (30) : /Users/rajarsiroy/Developer/system-design/lld/lld/airbnb/venv/lib/python3.11/site-packages/django/utils/log.py : Line 241 -> Not Found: /favicon.ico
